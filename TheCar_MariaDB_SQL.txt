# 유저 테이블 생성
CREATE TABLE tb_user (
userid INT AUTO_INCREMENT PRIMARY KEY,
username VARCHAR(30) NOT NULL UNIQUE,
password VARCHAR(100) NOT NULL,
name VARCHAR(20) NOT NULL,
birth CHAR(8) NOT NULL,
gender CHAR(1) NOT NULL,
phone CHAR(11) NOT NULL UNIQUE,
email VARCHAR(30) NOT NULL UNIQUE,
point INT DEFAULT 0,
role VARCHAR(10) NOT NULL DEFAULT 'Nomal',
regdate DATETIME DEFAULT CURRENT_TIMESTAMP);

# 게시글 테이블 생성
CREATE TABLE tb_post(
postid INT AUTO_INCREMENT PRIMARY KEY,
state CHAR(1) NOT NULL DEFAULT 'R',
title VARCHAR(100) NOT NULL,
content VARCHAR(2000) NOT NULL,
cartype VARCHAR(100) NOT NULL,
departures_postcode VARCHAR(200) NOT NULL,
departures_address VARCHAR(200) NOT NULL,
departures_detailAddress VARCHAR(200) NOT NULL,
departures_extraAddress VARCHAR(200),
arrivals_postcode VARCHAR(200) NOT NULL,
arrivals_address VARCHAR(200) NOT NULL,
arrivals_detailAddress VARCHAR(200) NOT NULL,
arrivals_extraAddress VARCHAR(200),
regdate DATETIME DEFAULT CURRENT_TIMESTAMP,
userid INT NOT NULL,
FOREIGN KEY(userid) REFERENCES tb_user(userid) ON DELETE CASCADE);

# 파일 테이블 생성
CREATE TABLE tb_file(
fileid INT NOT NULL AUTO_INCREMENT PRIMARY KEY COMMENT '파일 번호 (PK)',
postid INT NOT NULL COMMENT '게시글 번호 (FK)',
original_name varchar(255) NOT NULL COMMENT '원본 파일명',
save_name varchar(40) NOT NULL COMMENT '저장 파일명',
size int(11) NOT NULL COMMENT '파일 크기',
delete_yn tinyint(1) NOT NULL COMMENT '삭제 여부',
created_date datetime NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '생성일시',
deleted_date datetime DEFAULT NULL COMMENT '삭제일시',
FOREIGN KEY(postid) REFERENCES tb_post (postid));